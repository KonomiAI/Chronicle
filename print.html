<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Konomi Docs</title>
        <meta name="robots" content="noindex" />
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="Internal Documents">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="index.html">Intro</a></li><li class="chapter-item expanded affix "><li class="part-title">Design</li><li class="chapter-item expanded "><a href="design/proposal.html">Project Proposal</a></li><li class="chapter-item expanded "><a href="design/mvp_scope.html">MVP Scope</a></li><li class="chapter-item expanded "><a href="design/tech_stack.html">Tech Stack</a></li><li class="chapter-item expanded "><a href="design/database.html">Database Design</a></li><li class="chapter-item expanded "><a href="design/user_stories.html">User Stories</a></li><li class="chapter-item expanded "><a href="design/custom-form.html">Custom Form Design</a></li><li class="chapter-item expanded "><a href="design/data_analytics.html">Data analytics system Design</a></li><li class="chapter-item expanded "><a href="design/immutable_inventory_customer_balance.html">Immutable inventory & customer balance system</a></li><li class="chapter-item expanded affix "><li class="part-title">User Manual</li><li class="chapter-item expanded "><a href="user-manual/introduction.html">Introduction</a></li><li class="chapter-item expanded "><a href="user-manual/login.html">Login</a></li><li class="chapter-item expanded "><a href="user-manual/custom-fields.html">Custom form</a></li><li class="chapter-item expanded "><a href="user-manual/staff-management.html">Manage staff</a></li><li class="chapter-item expanded "><a href="user-manual/ip-allowlist.html">Manage IP allowlist</a></li><li class="chapter-item expanded "><a href="user-manual/customer-profile.html">Manage customer profiles</a></li><li class="chapter-item expanded "><a href="user-manual/inventory.html">Manage product & service inventory</a></li><li class="chapter-item expanded affix "><li class="part-title">Appendix</li><li class="chapter-item expanded "><a href="design/glossary.html">Glossary</a></li><li class="chapter-item expanded "><a href="misc/useful-links.html">Useful Links</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Konomi Docs</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="konomiai-documentation"><a class="header" href="#konomiai-documentation">Konomi.ai Documentation</a></h1>
<p>This is where we store all meeting minutes, API reference and product documentation!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="spa-patient-record-management-system"><a class="header" href="#spa-patient-record-management-system">SPA patient record management system</a></h1>
<h2 id="problem-description"><a class="header" href="#problem-description">Problem Description</a></h2>
<p>On a daily basis, our client has to track customer experience and manage practice related information. Their current solution involves saving records on paper and public cloud softwares like OneDrive. This solution has limits when it comes to scalability, customizability, and reportability. The solution also has limited searchability and is time consuming to build reports. Therefore, the client is seeking a solution for an affordable and scalable practice management software that allows them to track customer experience and improve team productivity.</p>
<h2 id="proposed-solution"><a class="header" href="#proposed-solution">Proposed Solution</a></h2>
<p>We propose a cloud hosted, on-premise available customer management tool that allows the client to create and manage customer profiles, record details throughout customer visits, and generate comprehensive reports to improve customer experiences. The solution will support user identity, customizable forms, enhanced user inputs, full-text search, data reporting, and AI enabled analytics. Our solution will simplify customer visit tracking and improve user experience.</p>
<h2 id="areas-of-focus"><a class="header" href="#areas-of-focus">Areas of focus:</a></h2>
<ul>
<li>User identity for customers, employees and administrators</li>
<li>Data collection with customizable forms</li>
<li>External service integrations</li>
<li>Full-text search</li>
<li>Security &amp; privacy</li>
<li>AI enabled natural language processing and analytics</li>
</ul>
<h2 id="stakeholder-contact"><a class="header" href="#stakeholder-contact">Stakeholder Contact:</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Email</th></tr></thead><tbody>
<tr><td>Carina Wong</td><td>carina@pemberleysprings.com</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="mvp-scope"><a class="header" href="#mvp-scope">MVP Scope</a></h1>
<p>The following represents the scope of our Minimum Viable Product (MVP) with a delivery target of April 2022.</p>
<h2 id="top-priority-must-have"><a class="header" href="#top-priority-must-have">Top priority (Must have)</a></h2>
<ul>
<li>Customer profile
<ul>
<li>Core fields</li>
</ul>
</li>
<li>Activity entry</li>
<li>Inventory
<ul>
<li>only the data structure &amp; reading the data</li>
</ul>
</li>
<li>Customizable IP whitelist</li>
<li>Identify staff for logging</li>
<li>user identity</li>
<li>Role based access control</li>
<li>One hard coded statistic report generation</li>
</ul>
<h2 id="medium-priority-nice-to-have"><a class="header" href="#medium-priority-nice-to-have">Medium priority (Nice to have)</a></h2>
<ul>
<li>Customer profile
<ul>
<li>Custom fields</li>
</ul>
</li>
<li>Customizable roles/permissions</li>
<li>User identity management</li>
<li>Audit log</li>
</ul>
<h2 id="low-priority-stretch-goals"><a class="header" href="#low-priority-stretch-goals">Low priority (Stretch goals)</a></h2>
<ul>
<li>Custom stat reports
<ul>
<li>automated time based</li>
<li>manual reports</li>
<li>report templates</li>
</ul>
</li>
<li>Inventory
<ul>
<li>Management UI</li>
</ul>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="konomiai-chronicle-technology-stack"><a class="header" href="#konomiai-chronicle-technology-stack">Konomi.ai Chronicle Technology Stack</a></h1>
<h2 id="front-end"><a class="header" href="#front-end">Front end</a></h2>
<ul>
<li>Platform: Web</li>
<li>Language: TypeScript</li>
<li>UI Framework: React SPA</li>
<li>Build tool: Vite</li>
<li>Styling: MUI</li>
<li>Libraries:
<ul>
<li>Data layer: React Query</li>
<li>Form handling: React Hook Form</li>
<li>State management: Zustand</li>
</ul>
</li>
<li>Testing:
<ul>
<li>Unit test: Vitest</li>
<li>E2E test: CypressJS</li>
</ul>
</li>
</ul>
<h2 id="back-end"><a class="header" href="#back-end">Back end</a></h2>
<ul>
<li>Platform: NodeJS</li>
<li>Language: TypeScript</li>
<li>Framework: NestJS</li>
<li>Testing:
<ul>
<li>Jest</li>
</ul>
</li>
<li>Database:
<ul>
<li>MongoDB</li>
</ul>
</li>
<li>Libraries
<ul>
<li>OR(D)M: Prisma/Mongoose</li>
</ul>
</li>
</ul>
<h2 id="infrastructure-management"><a class="header" href="#infrastructure-management">Infrastructure management</a></h2>
<ul>
<li>IaaC: Terraform</li>
<li>CI: GitHub Action</li>
<li>Cloud Service Provider: GCP</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="database-design"><a class="header" href="#database-design">Database Design</a></h1>
<pre class="mermaid">erDiagram

    Log_Trail {
        datetime timestamp
        string action
    }
    Permission {
        string feature
        string operation
    }
    Role {
        string name
        list permissions
    }
    Staff {
        string name
    }
    Entry {}
    Customer {
        string name
    }
    Form_Type{
        string name
    }
    Form {
        string name
        datetime version
        object sections
    }
    Response {
        datetime form_version
        object response
    }
    Form_Components {}
    Inventory {
        string name
        list variants
        float price
    }
    Activity {
        string name
        float price
    }

    Permission }|--|{ Role: in
    Role }o--o{ Staff: in
    Staff }o--|{ Entry: associated
    Entry }o--|| Customer: associated
    Entry }|--o{ Form_Type: has
    Form_Type }|--|| Form: has
    Form }|--o{ Form_Components: has
    Form ||--o{ Response: has
</pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="user-stories"><a class="header" href="#user-stories">User Stories</a></h1>
<p>This document includes a list of user stories we</p>
<p>User stories that are fully implemented are checked, user stories with automated testing implemented, will have the testing method labeled.</p>
<h2 id="identity-and-login"><a class="header" href="#identity-and-login">Identity and login</a></h2>
<ul>
<li><input disabled="" type="checkbox" checked=""/>
As a user, I can sign in and sign out of the application using correct credentials <code>(e2e)</code></li>
<li><input disabled="" type="checkbox" checked=""/>
As a user, I can update their password and sign in with updated password <code>(e2e)</code></li>
<li><input disabled="" type="checkbox" checked=""/>
As a user, when I try to login from a disallowed IP source, an error message should be displayed to the user <code>(jest)</code></li>
</ul>
<h2 id="identity-and-access-control"><a class="header" href="#identity-and-access-control">Identity and access control</a></h2>
<h3 id="ip-allowlist"><a class="header" href="#ip-allowlist">IP Allowlist</a></h3>
<ul>
<li><input disabled="" type="checkbox" checked=""/>
As an Owner, I want to be able to update the IP Whitelist, so I can prevent offsite activities. (e2e)</li>
<li><input disabled="" type="checkbox" checked=""/>
As an Owner, I want to ensure my staff cannot access the data from an unknown IP address. So I can protect the privacy of my customers</li>
<li><input disabled="" type="checkbox" checked=""/>
As a staff member, I want to be able to add staff to the system, so other staff could access the system as well. (e2e)</li>
</ul>
<h3 id="staff-management"><a class="header" href="#staff-management">Staff management</a></h3>
<ul>
<li><input disabled="" type="checkbox" checked=""/>
As a staff, I want to be able to reset another staff's account password, so they can regain access if they forgot their password</li>
<li><input disabled="" type="checkbox" checked=""/>
As a staff member, I want to be able to view the email and role details of another staff (e2e)</li>
<li><input disabled="" type="checkbox" checked=""/>
As a staff member, I want to be able to suspend other staff accounts so I can prevent them from accessing the system. (e2e)</li>
<li>[] As a staff member, I want to be able to delete a staff account, so I can remove their personal information from the system.</li>
</ul>
<h3 id="role-management"><a class="header" href="#role-management">Role Management</a></h3>
<ul>
<li><input disabled="" type="checkbox" checked=""/>
As a staff member, I want to be able to view the roles created for my company, so I can create missing roles and update existing ones.</li>
<li><input disabled="" type="checkbox" checked=""/>
As an owner, I want to be able to view the IP addresses I allowlisted and add new ones and remove old ones, so I can adapt to company network changes.</li>
<li><input disabled="" type="checkbox"/>
As a staff member, I want to be able to create roles, so that nothing more than the required permissions are given.</li>
<li><input disabled="" type="checkbox"/>
As a staff member, I want to be able to update staff roles, so other staff can get access to what they need.</li>
<li><input disabled="" type="checkbox"/>
As a staff member, I want to be able to update other staff account's details, so that their information can be up to date.</li>
<li><input disabled="" type="checkbox"/>
As a staff member, I want to be able to update existing roles, so that only the correct permissions are given to other staff.</li>
<li><input disabled="" type="checkbox"/>
As a staff member, I want to be able to sign into the dashboard using my username and password</li>
</ul>
<h2 id="inventory"><a class="header" href="#inventory">Inventory</a></h2>
<ul>
<li><input disabled="" type="checkbox" checked=""/>
As a staff member, I should be able to create treatment or physical goods</li>
<li><input disabled="" type="checkbox" checked=""/>
As a staff member, I should be able to update the price of physical goods</li>
<li><input disabled="" type="checkbox" checked=""/>
As a staff member, I should be able to support internal client's own id in the form of an SKU</li>
<li><input disabled="" type="checkbox"/>
As a staff member, I should be able to support universal barcode scanning for physical goods</li>
<li><input disabled="" type="checkbox" checked=""/>
As a staff member, I should be able to update all attributes of a product</li>
<li><input disabled="" type="checkbox" checked=""/>
As a staff member, I should be able to delete inventory items that are not used in an activity entry</li>
<li><input disabled="" type="checkbox"/>
As a staff member, I should be able to find inventory items by names</li>
<li><input disabled="" type="checkbox"/>
As a staff member, I should be able to find inventory items by SKU</li>
<li><input disabled="" type="checkbox"/>
As a staff member, I should be able to find physical goods by barcode</li>
<li><input disabled="" type="checkbox" checked=""/>
As a staff member, I should be able to manage variants and automatically generate a table of variants based on options</li>
<li><input disabled="" type="checkbox" checked=""/>
As a staff member, I should be able to manage variants and change price/SKU/barcode for each item</li>
<li><input disabled="" type="checkbox" checked=""/>
As a staff member, I should be able to manage variants and customize product options (option name, list of options)</li>
<li><input disabled="" type="checkbox"/>
As a staff member, I should be able to mark a product/service as unavailable</li>
<li><input disabled="" type="checkbox"/>
As a staff member, I should be able to manage variants and change price/SKU/barcode for any number of variants selected (stretch goal)</li>
</ul>
<h2 id="data-reporting"><a class="header" href="#data-reporting">Data Reporting</a></h2>
<ul>
<li><input disabled="" type="checkbox" checked=""/>
<p>As a BA staff, I want to see the total spending per customer in a set period of time</p>
</li>
<li><input disabled="" type="checkbox" checked=""/>
<p>As a manager, I want to see the revenue generated by each practitioner in a set period of time</p>
</li>
<li><input disabled="" type="checkbox" checked=""/>
<p>As a procurement staff, I want to see the total sales of each product in a set period of time</p>
</li>
<li><input disabled="" type="checkbox"/>
<p>As an owner, I want standard reports sent to me on a periodic basis (EOD/EOW)</p>
</li>
<li><input disabled="" type="checkbox"/>
<p>As an owner, I want to be able to specify what information is in a report</p>
</li>
<li><input disabled="" type="checkbox"/>
<p>As an owner, I want to be able to see the list of activities that were performed at a specified period of time</p>
</li>
<li><input disabled="" type="checkbox"/>
<p>As an owner, I want to be able to see the items and variations bought by customers during a specified period of time</p>
</li>
<li><input disabled="" type="checkbox"/>
<p>As an owner, I want to be able to view membership attendance and new members onboarded</p>
</li>
</ul>
<h2 id="forms"><a class="header" href="#forms">Forms</a></h2>
<ul>
<li><input disabled="" type="checkbox" checked=""/>
<p>The system shall record when a staff member edits a form response</p>
</li>
<li><input disabled="" type="checkbox" checked=""/>
<p>As a staff member, I want to be able to make edits to a form response</p>
</li>
<li><input disabled="" type="checkbox" checked=""/>
<p>As a staff member, I want to be able to create a form</p>
</li>
<li><input disabled="" type="checkbox" checked=""/>
<p>The system shall have preset forms with the following fields<br />
- customer info: first name, last name, DoB, sex, email, phone number<br />
- medical record: height, weight, allergies, conditions, additional notes<br />
- membership purchase/renewal (out of mvp scope): email, phone number (tied to customer info) level, date<br />
- Activity Entry: treatment, price, date/time, general notes, critical notes, and photos<br />
- Purchase/Transaction entry: product name, size, barcode, price</p>
</li>
<li><input disabled="" type="checkbox" checked=""/>
<p>The system should validate data before writing to the database to ensure consistency.</p>
</li>
<li><input disabled="" type="checkbox" checked=""/>
<p>As a staff member, I want to be able to create new fields on an existing form</p>
</li>
<li><input disabled="" type="checkbox" checked=""/>
<p>As a staff member, I want to be able to delete fields on a existing form</p>
</li>
<li><input disabled="" type="checkbox" checked=""/>
<p>As a staff member, I want to be able to view form responses</p>
</li>
<li><input disabled="" type="checkbox" checked=""/>
<p>As a staff member, I want to be able to view forms</p>
</li>
<li><input disabled="" type="checkbox" checked=""/>
<p>The system shall have a unique ID for each customer</p>
</li>
<li><input disabled="" type="checkbox" checked=""/>
<p>The system shall validate fields of a form before saving to the database.</p>
</li>
<li><input disabled="" type="checkbox" checked=""/>
<p>The system shall associate form responses with the respective customer and provider</p>
</li>
<li><input disabled="" type="checkbox"/>
<p>As a staff member, I want to be able to delete a form</p>
</li>
<li><input disabled="" type="checkbox" checked=""/>
<p>As a staff member, I want to be able to fill out a form response</p>
</li>
<li><input disabled="" type="checkbox" checked=""/>
<p>As a staff member, I want to be able to add sections to a form</p>
</li>
<li><input disabled="" type="checkbox" checked=""/>
<p>As a staff member, I want to be able to delete sections on a form</p>
</li>
<li><input disabled="" type="checkbox"/>
<p>As a staff member, I want to be able to update the order of the fields, so I can save time if I make a mistake making the form.</p>
</li>
<li><input disabled="" type="checkbox"/>
<p>As a provider, I should be able to search for specific entries involved with specific customers.</p>
</li>
<li><input disabled="" type="checkbox"/>
<p>As a provider, I should be able to view all a customer’s entries under their profile</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="customizable-form-system"><a class="header" href="#customizable-form-system">Customizable form system</a></h1>
<p>One key feature of our application is that it allows users to create their own forms and attach those forms to entities like customers, daily visits, products etc. The app also allows the user to perform analytics and data reporting using the custom data. This document will discuss a few ways to implement custom fields in our system.</p>
<h2 id="components-of-the-system"><a class="header" href="#components-of-the-system">Components of the system</a></h2>
<p>There are three components to the system.</p>
<ol>
<li>The template schema</li>
<li>Forms</li>
<li>Responses</li>
</ol>
<h3 id="the-template-schema"><a class="header" href="#the-template-schema">The template schema</a></h3>
<p>The template schema is a json schema managed by the Konomi.ai team. This schema defines the possible shape of tenant forms. The schema includes all allowed field types, field properties and form structure information.</p>
<p>The template is in the shape of a json schema version 7</p>
<h3 id="forms-1"><a class="header" href="#forms-1">Forms</a></h3>
<p>Forms are created by tenants and used within the tenancy. The shape of the forms are governed by the template schema. All forms must pass a schema test before responses can be made to the form.</p>
<p>The form shape is sanctioned by the template schema, upon saving a form, a new json schema will be generated to validate form responses.</p>
<h3 id="responses"><a class="header" href="#responses">Responses</a></h3>
<p>Responses are created by tenants's staff and are associated with a particular version of a form version. The response must pass a schema test before it can be used.</p>
<h2 id="form-features"><a class="header" href="#form-features">Form Features</a></h2>
<h3 id="validation"><a class="header" href="#validation">Validation</a></h3>
<p>Every response is validated against the version of the form it is responding to, this ensures that all fields are valid before the user can save a response. Response validation happens on the client first and then on the server. The validation logic is handled by the <code>c-form</code> package which includes helper function that take in a form definition and validate against it.</p>
<p>Currently, we aim to support optional fields first. In the future we want to support more complex field validation logic.</p>
<h3 id="versioning"><a class="header" href="#versioning">Versioning</a></h3>
<p>A core design of the form is the ability to keep track of versions for forms and responses. When a change is made to a form/response, a new version of the entity will be created, this will ensure a full track of audit history on changes and allow the ability to rollback potential changes. This also keeps the database sain for the sake of the developers.</p>
<h3 id="field-types"><a class="header" href="#field-types">Field types</a></h3>
<p>The form will support the following form types for now:</p>
<ol>
<li>Short text - usually text within one line</li>
<li>Long text - text that can span multiple paragraphs</li>
<li>Multiple choice - select an option from a list of possible options</li>
<li>Multi select - select up to a number of options from a list of possible options</li>
<li>Number - an input that can only be a numerical value (no scientific values allowed)</li>
</ol>
<h3 id="load-multiple-choice-options-from-server"><a class="header" href="#load-multiple-choice-options-from-server">Load multiple choice options from server</a></h3>
<p>The system will be able to load multiple choice options dynamically using REST APIs.</p>
<h3 id="connection-with-entities"><a class="header" href="#connection-with-entities">Connection with entities</a></h3>
<p>Entities like activity entry, customers, etc. will have a new responses field. This will keep track of all the responses that was filled for the entity.</p>
<p>For activity entry, upon creation, all forms with activity entry as the purpose is loaded. The user selects one form and completes it. Then users can add any number of activity entry, or null purpose forms to the entry.</p>
<p>For all other entities, by default all forms whose purpose is matching the entity are required to be completed. Then users can attach any additional fields.</p>
<h2 id="form-management-lifecycle"><a class="header" href="#form-management-lifecycle">Form management lifecycle</a></h2>
<h3 id="create-new-form"><a class="header" href="#create-new-form">Create new form</a></h3>
<pre class="mermaid">sequenceDiagram
  autonumber
  participant Client
  participant Server
  participant Database
  Client-&gt;&gt;Client: Validate form with c-form
  Client-&gt;&gt;Server: Send created form to server
  Server-&gt;&gt;Server: Validate form with c-form
  Server-&gt;&gt;Database: Save new form
  activate Database
  Database--&gt;&gt;Server: Form saved with ID
  deactivate Database
  Server--&gt;&gt;Client: Form created with ID
</pre>
<h3 id="update-existing-form"><a class="header" href="#update-existing-form">Update existing form</a></h3>
<pre class="mermaid">sequenceDiagram
  autonumber
  participant Client
  participant Server
  participant Database
  Client-&gt;&gt;Client: Validate form with c-form
  Client-&gt;&gt;Server: Send updated form to server
  Server-&gt;&gt;Server: Validate form with c-form
  Server-&gt;&gt;Database: Save updated form as draft
  activate Database
  Database--&gt;&gt;Server: Form saved with ID
  deactivate Database
  Server--&gt;&gt;Client: Form draft saved with ID
  Client-&gt;&gt;Server: Update form to draft version
  Server-&gt;&gt;Database: Update form to draft version
  Database--&gt;&gt;Server: Form version updated to draft version
  Server--&gt;&gt;Client: Form version updated to draft version
</pre>
<h2 id="database-design-1"><a class="header" href="#database-design-1">Database design</a></h2>
<p>Here we describe the proposed database design for this system</p>
<pre class="mermaid">erDiagram
  form ||--|| latestForm  : uses
  form ||--|{ formVersion : versions
  form {
    string id
    string templateVersion
    string purpose
  }
  formVersion ||--o| latestForm : is
  formVersion {
    string id
    string formVersionId
    json formData
  }
  response |o--|| formVersion : responsesTo
  response ||--|| latestResponse : uses
  response ||--|{ responseVersion : versions
  response {
    string id
  }
  responseVersion ||--o| latestResponse : is
  responseVersion {
    string id
    json responseData
  }
</pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="data-analytics-system-design"><a class="header" href="#data-analytics-system-design">Data analytics system design</a></h1>
<p>We want to help our customers better understand the performance of their business and gain insights from the data they collect. To achieve this goal, we designed a powerful analytics system with progressive improvements in mind.</p>
<h2 id="setting-the-goals"><a class="header" href="#setting-the-goals">Setting the goals</a></h2>
<p>The first issue we tackled as a team is to understand the goal of our analytics service and the MVP scope of the service. From there we setup a future outlook on the features we want to see the service deliver.</p>
<p>Through discussion, we decided that the goal of our analytics service is:</p>
<ul>
<li>Customizable</li>
<li>Easy to use</li>
<li>Comprehensive &amp; Dynamic</li>
</ul>
<h3 id="customizable"><a class="header" href="#customizable">Customizable</a></h3>
<p>We want to build a service where the customer can have maximum control over the reports they generate, they can chose the filtering criteria, select the column and aggregations and more importantly receive the data in the format they prefer.</p>
<p>For our MVP product, we want the user to be able to set the time-based filtering criteria, select the columns to display and data to aggregate. We plan on generating JSON and in-app table as the initial export solution</p>
<p>In the future we plan on implementing the following capabilities.</p>
<ul>
<li>Filter data with more fields</li>
<li>Customizable aggregation techniques (average, min, max over period)</li>
<li>More data exporting methods (CSV, XLSX, or to other analytics services)</li>
</ul>
<h3 id="easy-to-use"><a class="header" href="#easy-to-use">Easy to use</a></h3>
<p>We want to build an analytics service that does not require a degree in data science to use. For that we need a simple and streamlined customer experience with the ability to build commonly used reports with a click of a button.</p>
<p>For our MVP product we will include handcrafted templates that customers can implement without fiddling with a bunch of filters and form controls.</p>
<p>In the future we plan on making the system more accessible by adding:</p>
<ul>
<li>Column suggestions</li>
<li>Automatically generated reports</li>
<li>In-app data visualization with charts</li>
</ul>
<h3 id="comprehensive-and-dynamic"><a class="header" href="#comprehensive-and-dynamic">Comprehensive and dynamic</a></h3>
<p>We want to ensure our focus of ease-of-use and accessibility does not hamper the clients' capability to perform more advanced analytical tasks. For that we have.</p>
<p>For the MVP, we want to build predefined aggregation views that cover at least 90% of the client's analytics use cases.</p>
<p>In the future we will add:</p>
<ul>
<li>The ability to aggregate any column</li>
<li>The ability to set aggregation window sizes</li>
<li>The ability to work with data from user generated custom forms</li>
<li>Multiple data sources on a single table to see relationship between data sources (a)</li>
</ul>
<h2 id="building-the-mvp"><a class="header" href="#building-the-mvp">Building the MVP</a></h2>
<p>To summarize, the MVP version of the data analytics will have pre-defined aggregation capabilities and not feature data from customizable forms.</p>
<h3 id="understanding-the-data"><a class="header" href="#understanding-the-data">Understanding the data</a></h3>
<p>The first goal was to understand the data we have collected through the 4 major business focused models of the application</p>
<ul>
<li>Customer</li>
<li>Inventory</li>
<li>Staff</li>
<li>Activity Entry</li>
</ul>
<p>We selected the following aggregations to integrate in the MVP</p>
<div class="table-wrapper"><table><thead><tr><th>Data Source</th><th>Aggregations</th></tr></thead><tbody>
<tr><td>Customer</td><td><ul><li>Visits in period</li><li>Amount spent in period</li></ul></td></tr>
<tr><td>Staff</td><td><ul><li>Entries performed in selected period</li><li>Amount earned in selected period</li><li>Activities performed in period</li><li>Products sold in a period</li></ul></td></tr>
<tr><td>Activity</td><td><ul><li>County in period</li><li>Revenue in period</li></ul></td></tr>
<tr><td>Products</td><td><ul><li>Count in period</li><li>Revenue period</li></ul></td></tr>
</tbody></table>
</div>
<h3 id="aggregating-the-data"><a class="header" href="#aggregating-the-data">Aggregating the data</a></h3>
<p>The data will be aggregated and processed on the service and not in the database, this is due to the concern of the limited capabilities of our MongoDB instance. Data will be mapped on the API.</p>
<p>This is also due to the fact that for our service, the API can scale quickly (new instance ready in under 500ms) and the database cannot do so as quickly.</p>
<h3 id="saving-the-reports"><a class="header" href="#saving-the-reports">Saving the reports</a></h3>
<p>Once a report is generated, the report will be sent to the client and also saved in the database alongside the configuration template. The user will be able to come back to the report anytime without needing to perform the aggregation again.</p>
<h2 id="summary"><a class="header" href="#summary">Summary</a></h2>
<p>Chronicle is not only for collecting personal care practice data, it is also designed to help business owners to gain insights in their business from the data collected, this will help them make more informed decisions.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="item-versioning--customer-balance-system"><a class="header" href="#item-versioning--customer-balance-system">Item versioning &amp; customer balance system</a></h1>
<h2 id="inventory-versioning-proposal"><a class="header" href="#inventory-versioning-proposal">Inventory versioning proposal</a></h2>
<p>Inventory data is currently mutable, this could lead to issues with analytics and in the future the balance system we want to implement. This proposal details a way to make our inventory system immutable to allow us to scale our application capabilities in the future.</p>
<h3 id="new-record-on-update"><a class="header" href="#new-record-on-update">New record on update</a></h3>
<p>The solution to the mutation problem is to create a new copy of the inventory item whenever the user updates the item's attributes. What this looks like with our current data:</p>
<ul>
<li>For <strong>activities</strong>, whenever the user updates a field, a new record is created and the previous one is marked legacy and hidden from user, the only way to access it again is through activity entries.</li>
<li>For <strong>Product variants</strong>, the process is a bit more complex. When the user updates a variant, the variant is recreated as a new record and the previous record is archived, the link between the variant and the product will remain but loading the product data will not show any archived variants. When a product is updated, we have two viable solutions:
<ul>
<li>the product is not recreated as a new record and remains mutable, instead the user will get the warning that updating the product name will cause their analytics data to be impacted.</li>
<li>the product is recreated as a new record; all variants will be linked to both records. This can cause problems as we need to modify the existing relation between product/variant from 1-to-many to many-to-many, which increases the complexity of the application so it is not preferred unless we must.</li>
</ul>
</li>
</ul>
<h3 id="annotating-legacy-records-to-users"><a class="header" href="#annotating-legacy-records-to-users">Annotating legacy records to users</a></h3>
<p>If a particular record is archived due to updates, we shall display a banner on the inventory details page informing users this item is archived and can no longer be used, if a product has archived variants, we can note that the product has archived variants.</p>
<p>On the activity entries page, archived activities and product variants will have distinct labels to inform the user that the product has been updated. There will also be a warning that if a user removes the archived activity/product they will not be able to add it back.</p>
<h3 id="determining-if-a-record-has-been-updated"><a class="header" href="#determining-if-a-record-has-been-updated">Determining if a record has been updated</a></h3>
<p>This is an area that is out of the scope of the initial discussion, but should be considered as we progress, and can be added on later.</p>
<h2 id="customer-balance"><a class="header" href="#customer-balance">Customer balance</a></h2>
<p>One thing we noticed from looking at the client's files is that the use of balance is quite important to the business. I believe we should consider implementing such system as part of our MVP, it would be a banger feature that can really help improve the efficiency of the client's business.</p>
<p>The following is a discussion on the few necessary components and changes to support such a feature.</p>
<h3 id="a-new-ledger"><a class="header" href="#a-new-ledger">A new ledger</a></h3>
<p>To keep track of customer balance, we should use a dynamically calculated model in the form of a ledger. The ledger will resemble the following model:</p>
<pre><code class="language-prisma">model Ledger {
  id String   @id @default(auto()) @map(&quot;_id&quot;) @db.ObjectId
  amount Int
  description String @optional
  customer Customer
  activityEntry ActivityEntry @optional
  createdBy Staff
  createdDt DateTime @default(now())
}
</code></pre>
<p>Here is an explanation of the model described above:</p>
<ul>
<li>The model will track the transaction amount in cents like the rest of the application, the value is positive for a charge against the customer (e.g. spent $80 will be 8000)</li>
<li>The model will allow the staff to also include a description in the charge, this will be displayed on the user's transaction history page</li>
<li>Records in the table must not be updated and deleted, staff can create correctional transactions if they need</li>
<li>A transaction can be linked 1-to-1 with an activity entry, this can help identify sources of charge.</li>
<li>An activity entry may only have 1 charge on the ledger, any amendments must be done via adjustment.</li>
</ul>
<h3 id="charges-and-negative-balance"><a class="header" href="#charges-and-negative-balance">Charges and negative balance</a></h3>
<p>We propose allowing negative balances to simplify the system, but in the future we should allow the admin to set negative balance tolerance. They should be able to choose negative balance allowance for all customers or for a single customer. They can also disable the possibility all together which will prevent a negative balance from occuring.</p>
<h3 id="improved-activity-entries"><a class="header" href="#improved-activity-entries">Improved activity entries</a></h3>
<p>Activity entries shall also be improved to better handle the new transaction system. Here is a list of proposed changes:</p>
<ul>
<li>New lock feature, when the staff creates a charge with the activity entry, it will also lock the activity entry preventing any changes to the customer, activity, or products fields. Activity entries will also be undeletable, but staff can change the custom field responses, and add or remove responses</li>
<li>New UI for creating a charge, should be place after the information fields and before the custom form fields.</li>
</ul>
<h3 id="improved-customer-ui"><a class="header" href="#improved-customer-ui">Improved customer UI</a></h3>
<p>The customer page will also receive a UI upgrade to allow the following features</p>
<ul>
<li>Balance view on customer details page</li>
<li>Transaction history on customer details page</li>
</ul>
<h3 id="possible-ui-for-managing-the-ledger"><a class="header" href="#possible-ui-for-managing-the-ledger">Possible UI for managing the ledger</a></h3>
<h2 id="conclusion"><a class="header" href="#conclusion">Conclusion</a></h2>
<p>I believe we can bring our client great value if we implemented a customer balance management system, this is also in-line with the vision of the product and many other personal care agencies can use it as well.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="chronicle-user-manual"><a class="header" href="#chronicle-user-manual">Chronicle User Manual</a></h1>
<p>This is the user manual for Konomi.ai's Chronicle app. Chronicle is a personal practice tracking, customer relations management (CRM) application that aims to simplify the way you and your business track practice data and customer engagement.</p>
<h2 id="table-of-content"><a class="header" href="#table-of-content">Table of content</a></h2>
<p>TODO</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="login--authentication"><a class="header" href="#login--authentication">Login &amp; authentication</a></h1>
<p>Chronicle has a robust access control system that protects you and your customers' data. This guide will detail how to use password sign in.</p>
<h2 id="how-to-login-to-chronicle-dashboard"><a class="header" href="#how-to-login-to-chronicle-dashboard">How to login to Chronicle dashboard</a></h2>
<p>Steps:</p>
<ol>
<li>Go to the login page of your organization</li>
<li>Enter your email and password and click <strong>Login</strong></li>
</ol>
<h2 id="how-to-logout-of-chronicle"><a class="header" href="#how-to-logout-of-chronicle">How to logout of Chronicle</a></h2>
<p>Steps:</p>
<ol>
<li>Click the profile icon on the top right of the page.</li>
<li>Click <strong>Logout</strong></li>
</ol>
<h2 id="how-long-do-i-stay-signed-in-for"><a class="header" href="#how-long-do-i-stay-signed-in-for">How long do I stay signed in for?</a></h2>
<p>Each sign in session lasts 7 hours, that means you must sign in every 7 hours when using the application. We are working on allowing you to maintain your authorized session with automatically renewed sessions.</p>
<h2 id="how-can-i-reset-my-password"><a class="header" href="#how-can-i-reset-my-password">How can I reset my password?</a></h2>
<p>Steps:</p>
<ol>
<li>Ensure you are currently logged in</li>
<li>On the top right, click on your Profile to release a dropdown.</li>
<li>On the dropdown, click on Profile</li>
<li>Enter your new password. (Note: the minimum length for a password is 8)</li>
<li>Enter the same password again in the confirm password field</li>
<li>Click on change</li>
<li>You will currently still be logged in, however on your next log in attempt, your new password will apply</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h1 id="customizable-forms"><a class="header" href="#customizable-forms">Customizable forms</a></h1>
<p>Often, businesses have custom data collection requirements and forms that are tailored to their specific organization. Chronicle accommodates this by supporting the ability to create &quot;custom forms&quot;. Custom forms are Google Form like forms where you can add questions, set validation rules and require your staff to fill out during any business process, whether that's creating a new customer profile, logging a service entry, or enrolling a new staff member. Custom forms allow you to collect and analyze data the way you want.</p>
<h2 id="how-to-access-custom-forms"><a class="header" href="#how-to-access-custom-forms">How to access custom forms</a></h2>
<p>To see your custom forms and mange them:</p>
<ol>
<li>click on the <strong>Customize Forms</strong> option on the side navigation</li>
<li>You should see a list of all custom forms in your organization.</li>
</ol>
<h3 id="what-if-i-dont-see-the-option-on-the-side-navigation"><a class="header" href="#what-if-i-dont-see-the-option-on-the-side-navigation">What if I don't see the option on the side navigation?</a></h3>
<p>If the <strong>Customize Forms</strong> option is not available for you, it likely means you do not have access to the feature. Ask your administrator to grant you access to custom forms to access the feature.</p>
<h2 id="how-to-create-a-new-custom-form"><a class="header" href="#how-to-create-a-new-custom-form">How to create a new custom form</a></h2>
<p>To create a new custom form follow the following instructions,</p>
<ol>
<li>Access the custom form list, you can follow the instructions above if you need assistance.</li>
<li>Click the <strong>Create</strong> button on the page.</li>
</ol>
<p>You are now navigated to a new form creation page, follow the form to create your form.</p>
<ol>
<li>Make sure to provide a title and description for your form, forms with clear description and title are more likely to be used.</li>
<li>Select a purpose for the form, forms with specific purpose are displayed before all other forms when used by your staff, they are also marked as <strong>recommended</strong>.</li>
<li>Give your first section a title, every form must have at least one section and one question.</li>
<li>Add a question to the new section, a question must have a title.</li>
<li>You can change the question type using the <strong>Question type</strong> dropdown next to the question title</li>
<li>For <em>multiple choice</em> and <em>multi-select questions</em>, you must also create a list of options, add option titles and press <strong>Add option</strong> to create more options</li>
<li>For <em>dynamic data select</em> questions, you must select a data source to populate the options from.</li>
<li>You can add a description to a question by clicking <strong>Add description</strong>, question descriptions are optional</li>
<li>You can make a question optional to complete by unchecking the <strong>required</strong> toggle.</li>
<li>You can add more questions to the section by clicking on <strong>Add question</strong>.</li>
<li>You can add more sections to the form by clicking on <strong>Add new section</strong>.</li>
<li>Make sure to press save at the bottom of the page when you are done.</li>
</ol>
<h2 id="update-an-existing-form"><a class="header" href="#update-an-existing-form">Update an existing form</a></h2>
<p>When you update an existing form, Chronicle creates a new version of the form and maintains the previous versions just in case they are being used in existing activity entries. This system ensures you will not lose any existing data when modifying form fields. You currently can't browse previous versions of your form, we are actively working to enable this feature.</p>
<p>Steps:</p>
<ol>
<li>Access the custom form list, you can follow the instructions above if you need assistance.</li>
<li>Click on the form you want to update.</li>
<li>Follow the create form guide for details on how to use the form builder.</li>
</ol>
<h2 id="custom-form-best-practices"><a class="header" href="#custom-form-best-practices">Custom form best practices</a></h2>
<ul>
<li>While it is possible to create a form with no sections and no question, this is not a recommended practice.</li>
<li>Use the paragraph option if you want your staff to provide text responses longer than a sentence.</li>
<li>It is recommended to not delete fields from forms that are being used. While it will not affect any existing entries, you may potentially lose track of data.</li>
</ul>
<h2 id="custom-form-limitations-and-in-progress-features"><a class="header" href="#custom-form-limitations-and-in-progress-features">Custom form limitations and in-progress features</a></h2>
<ul>
<li></li>
<li>Currently you cannot reorder the fields you created, this is an in-development feature.</li>
<li>Currently you cannot duplicate an existing field, this is an in-development feature.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="staff--role-management"><a class="header" href="#staff--role-management">Staff &amp; role management</a></h1>
<p>Chronicle features a robust staff management system that allows you to track staff information, grant access to specific parts of the system and gain performance insights.</p>
<p><em>Before proceeding, make sure you are signed in as the super user or you are a user with write access to security feature. This feature is granted to all users with the built-in administrator role</em></p>
<h2 id="role-management-1"><a class="header" href="#role-management-1">Role Management</a></h2>
<p>You can view, create and update your roles in the system.</p>
<h3 id="create-a-new-role"><a class="header" href="#create-a-new-role">Create a new role</a></h3>
<p>Steps:</p>
<ol>
<li>Click on Security on the side menu to show all security menu options, click on <strong>Roles</strong>.</li>
<li>Click <strong>Create new role</strong></li>
<li>Provide a name and a description for the role.</li>
<li>Select all accesses the role has in the system, note if a user has write permission in a role, they will automatically be granted read permission.</li>
<li>Remember to click <strong>Save</strong> at the bottom of the page.</li>
</ol>
<h3 id="update-an-existing-role"><a class="header" href="#update-an-existing-role">Update an existing role</a></h3>
<p>Steps:</p>
<ol>
<li>Click on security on the side menu to show all security menu options, click on <strong>Roles</strong></li>
<li>Select the role you want to update</li>
<li>Make the necessary changes in the form</li>
<li>Click <strong>Save</strong> when you are done</li>
</ol>
<h3 id="deleting-a-role"><a class="header" href="#deleting-a-role">Deleting a role</a></h3>
<p>Steps:</p>
<ol>
<li>Click on security on the side menu to show all security menu options, click on <strong>Roles</strong></li>
<li>Select the role you want to delete</li>
<li>Make the necessary changes in the form</li>
<li>Click <strong>delete</strong> in the danger zone section of the page. You cannot delete a role if it is assigned to a staff, even if the staff is no longer active. Remove the role from the staff or delete the staff to delete the role.</li>
</ol>
<h2 id="staff-management-1"><a class="header" href="#staff-management-1">Staff management</a></h2>
<p>You can currently create and manage staff information using the security feature of Chronicle. We are currently recording basic information about the staff, and are planning to allow custom forms be connected to staff records soon.</p>
<h3 id="invite-a-new-staff"><a class="header" href="#invite-a-new-staff">Invite a new staff</a></h3>
<p>Steps:</p>
<ol>
<li>Access the staff list by clicking on <strong>Staff</strong> on the side menu, if you don't see <strong>Staff</strong>, click on <strong>Security</strong> to see the option.</li>
<li>Click <strong>Invite</strong></li>
<li>Fill in the form that showed up in the dialog</li>
<li>A temporary password will be created for the staff, take a note of the password as it is only shown once.</li>
<li>Send the login credentials to your staff member, they will be able to sign in using the credentials provided.</li>
</ol>
<h3 id="reset-a-staff-members-password"><a class="header" href="#reset-a-staff-members-password">Reset a staff member's password</a></h3>
<p>If your staff member forgot their login credentials, you can reset it using the staff details page.</p>
<p>Steps:</p>
<ol>
<li>Access the staff list by clicking on <strong>Staff</strong> on the side menu, if you don't see <strong>Staff</strong>, click on <strong>Security</strong> to see the option.</li>
<li>Click on the staff that requested assistance</li>
<li>Click <strong>Reset password</strong>, then confirm the intent to reset the password.</li>
<li>A temporary password will be created for the staff, take a note of the password as it is only shown once.</li>
<li>Send the login credentials to your staff member, they will be able to sign in using the credentials provided.</li>
</ol>
<p>Notes:</p>
<p><em>The staff will not be signed out of the app if you reset their password, we are working on a system to force sign out the user.</em></p>
<h3 id="update-a-staff-members-profile"><a class="header" href="#update-a-staff-members-profile">Update a staff member's profile</a></h3>
<p>The process is the same as resetting the password, just update the fields in the form and remember to press save.</p>
<h3 id="deleting-a-staff-member"><a class="header" href="#deleting-a-staff-member">Deleting a staff member</a></h3>
<p>When you delete a staff member, their record is not remove entirely. Instead we erase any personal information recorded about the staff member. This includes their email, name, gender, and any associated custom forms.</p>
<p>Steps:</p>
<ol>
<li>Go to the staff member's details page.</li>
<li>Suspend the staff first by clicking on <strong>Suspend</strong>, this will disable the user's access to the system immediately.</li>
<li>You can delete suspended staff by clicking on the <strong>Delete</strong> button in the danger zone</li>
</ol>
<h2 id="super-user--additional-security"><a class="header" href="#super-user--additional-security">Super user &amp; additional security</a></h2>
<p>You will receive a <em>super user</em> account when your account is first activated, the super user bypasses all firewall restrictions and has full access to the entire application. It is designed to allow the administrators of your establishment to configure the access control correctly before onboarding the remaining staff. We recommend that you suspend access to the account as soon as proper users have been configured.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ip-allowlist-1"><a class="header" href="#ip-allowlist-1">IP Allowlist</a></h1>
<p>IP allowlist is a powerful application level firewall feature that Chronicle supports to help protect you and your clients' personal data. The IP allowlist enables you to set a fixed list of IP addresses that can access the application to ensure imposters outside your network have no access to your data. To configure the IP allowlist, follow this guide.</p>
<h2 id="create-new-allowlist-entries"><a class="header" href="#create-new-allowlist-entries">Create new allowlist entries</a></h2>
<p>By default, we have <code>0.0.0.0/0</code> setup for you, this address allows access from all possible IP addresses and is not safe, we recommend you update the allowlist as soon as possible to reflect the network of your establishment.</p>
<p>Steps:</p>
<ol>
<li>Select <strong>IP allowlist</strong> on the side drawer.</li>
<li>Click <strong>Add new</strong></li>
<li>Add an IP address and provide a description for additional context</li>
</ol>
<h3 id="how-ip-verification-works-on-chronicle"><a class="header" href="#how-ip-verification-works-on-chronicle">How IP verification works on Chronicle</a></h3>
<p>Chronicle uses Classless Inter-Domain Routing (CIDR) method to verify your IP address, this means you can allow several IP addresses by providing a subnet IP instead of just an IP address. If you are unsure how this works, we recommend that you simply use a single IP address. Chronicle supports both IPv4 and IPv6 addresses.</p>
<h2 id="delete-an-existing-entry"><a class="header" href="#delete-an-existing-entry">Delete an existing entry</a></h2>
<p>Be careful, if you delete the entry you are actively using, you risk loosing access to the application immediately.</p>
<p>Steps:</p>
<ol>
<li>Select <strong>IP allowlist</strong> on the side drawer.</li>
<li>Click the garbage can icon next to the entry you want to delete.</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h1 id="customer-profile"><a class="header" href="#customer-profile">Customer profile</a></h1>
<p>Chronicle allows you to keep track of customer information and balance within the application. By default, Chronicle requires the name and email of the customer and allows you to also collect the phone number, date of birth and gender of the customer. You can use custom forms to collect more information that is not already collected by the application</p>
<h2 id="create-a-new-customer"><a class="header" href="#create-a-new-customer">Create a new customer</a></h2>
<p>Steps:</p>
<ol>
<li>Select <em>customer profiles</em> on the side drawer.</li>
<li>Click <strong>New customer</strong> at the top of the page.</li>
<li>Fill in the form and press save</li>
<li>You can add custom forms to the customer using the custom forms card.
<ol>
<li>Click on <strong>New form</strong></li>
<li>Select the form you want to add</li>
<li>Fill in the form</li>
<li>Click <strong>Save <Some form name> changes</strong></li>
</ol>
</li>
</ol>
<h2 id="update-a-customer-profile"><a class="header" href="#update-a-customer-profile">Update a customer profile</a></h2>
<p>Steps:</p>
<ol>
<li>Select <em>customer profiles</em> on the side drawer.</li>
<li>Select the customer you want to update</li>
<li>Update the data in the form and press save</li>
</ol>
<p>To update the customer's custom form, use the <strong>Custom forms</strong> module.</p>
<h2 id="top-up-customer-account"><a class="header" href="#top-up-customer-account">Top-up customer account</a></h2>
<p>Steps:</p>
<ol>
<li>Select <em>customer profiles</em> on the side drawer.</li>
<li>Select the customer you want to top-up</li>
<li>Click <strong>Top up account</strong> in the <em>balance and transactions</em> card</li>
<li>Enter the top up amount and add an optional description to the transaction</li>
<li>Press <strong>proceed</strong>, then press <strong>confirm</strong> in the confirmation dialog</li>
</ol>
<h2 id="adjust-customer-balance"><a class="header" href="#adjust-customer-balance">Adjust customer balance</a></h2>
<p>If you notice an error with the customer's balance you can make an adjustment to the balance on the customer's details page.</p>
<p>Steps:</p>
<ol>
<li>Select <em>customer profiles</em> on the side drawer.</li>
<li>Select the customer you want to perform balance adjustment on</li>
<li>Click <strong>Adjust balance</strong> in the <em>balance and transactions</em> card</li>
<li>Select the adjustment type
<ol>
<li>Positive adjustment adds to the customer's balance</li>
<li>Negative adjustment subtracts from the customer's balance</li>
</ol>
</li>
<li>Enter the adjustment amount and add an optional description to the transaction</li>
<li>Press <strong>proceed</strong>, then press <strong>confirm</strong> in the confirmation dialog</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h1 id="inventory-1"><a class="header" href="#inventory-1">Inventory</a></h1>
<p>Chronicle allows you to manage your product and service inventory inside the app. The inventory can then be applied to activity entries and charged to the customers.</p>
<h2 id="inventory-concepts"><a class="header" href="#inventory-concepts">Inventory concepts</a></h2>
<h3 id="activity"><a class="header" href="#activity">Activity</a></h3>
<p>An activity is a service performed to a customer, each activity entry can only have a single service. If a customer receives multiple services, multiple activity entries must be created.</p>
<h3 id="product"><a class="header" href="#product">Product</a></h3>
<p>A product is a physical item sold to the customer, an activity entry can have any number of products sold.</p>
<h2 id="create-a-new-inventory-item"><a class="header" href="#create-a-new-inventory-item">Create a new inventory item</a></h2>
<h3 id="activity-service"><a class="header" href="#activity-service">Activity (service)</a></h3>
<p>Steps:</p>
<ol>
<li>Access <strong>Inventory</strong> using the side drawer</li>
<li>Make sure the <strong>Activities</strong> tap is highlighted on the page, if not click <strong>Activities</strong></li>
<li>Click <strong>Create</strong></li>
<li>Provide the name and price information for the service</li>
<li>Press save at the bottom of the page</li>
</ol>
<h3 id="product-1"><a class="header" href="#product-1">Product</a></h3>
<p>Steps:</p>
<ol>
<li>Access <strong>Inventory</strong> using the side drawer</li>
<li>Make sure the <strong>Product</strong> tap is highlighted on the page</li>
<li>Click <strong>Create</strong></li>
<li>Provide the name and brand information for the product</li>
<li>Click <strong>Add new variant</strong> to add a variant to the product, then complete the fields of the dialog. (every product must have at least one variant)
<ol>
<li>The variant descriptor can be used to describe the specific variant, for example size, capacity, color, etc.</li>
<li>The price of the variant.</li>
<li>A unique barcode for identifying the product</li>
</ol>
</li>
<li>Press save at the bottom of the page</li>
</ol>
<h2 id="update-an-existing-inventory-item"><a class="header" href="#update-an-existing-inventory-item">Update an existing inventory item</a></h2>
<h3 id="activity-1"><a class="header" href="#activity-1">Activity</a></h3>
<p>Steps:</p>
<ol>
<li>Access <strong>Inventory</strong> using the side drawer</li>
<li>Make sure the <strong>Activity</strong> tap is highlighted on the page</li>
<li>Click the activity entry you want to update</li>
<li>You can update the activity name and price</li>
<li>Press save at the bottom of the page</li>
</ol>
<h3 id="product-2"><a class="header" href="#product-2">Product</a></h3>
<p>Steps:</p>
<ol>
<li>Access <strong>Inventory</strong> using the side drawer</li>
<li>Make sure the <strong>Product</strong> tap is highlighted on the page</li>
<li>Click the product entry you want to update</li>
<li>You can update the product name and brand</li>
<li>Press save at the bottom of the page</li>
</ol>
<p>You can also update a product's variant information.</p>
<p>Steps:</p>
<ol>
<li>Go the the product details page you want to update.</li>
<li>Click on the variant you want to update.</li>
<li>Update the values in the form.</li>
<li>Press save</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h1 id="chronicle-glossary"><a class="header" href="#chronicle-glossary">Chronicle Glossary</a></h1>
<p>The following are terms used in Chronicle and what they mean</p>
<div class="table-wrapper"><table><thead><tr><th>Term</th><th>Definition</th></tr></thead><tbody>
<tr><td>Activity</td><td>A treatment provided to a customer, usually intangible like massage or haircut.</td></tr>
<tr><td>Entry</td><td>A transaction recorded by the staff that describes an activity performed by a customer.</td></tr>
<tr><td>Inventory</td><td>A collection of products and activities offered by a tenant.</td></tr>
<tr><td>Product</td><td>A physical good sold to a customer, like a bottle of cream or a t-shirt.</td></tr>
<tr><td>Report</td><td>A customizable document with data aggregated from Chronicle.</td></tr>
<tr><td>Tenant</td><td>The client's company, store, or establishment using Chronicle for managing entries.</td></tr>
<tr><td>Visit</td><td>TODO</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="useful-links"><a class="header" href="#useful-links">Useful links</a></h1>
<p>Here are some useful links to navigate around the Chronicle project</p>
<h3 id="figma"><a class="header" href="#figma">Figma</a></h3>
<ul>
<li><a href="https://www.figma.com/file/CSDPY2LRme3hymSE8tnsIq/Chronicle?node-id=0%3A1">Design Board</a></li>
<li><a href="https://www.figma.com/proto/CSDPY2LRme3hymSE8tnsIq/Chronicle?node-id=24%3A81&amp;scaling=scale-down&amp;page-id=0%3A1&amp;starting-point-node-id=24%3A81&amp;show-proto-sidebar=1">Prototypes</a></li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript" src="mermaid.min.js"></script>
        <script type="text/javascript" src="mermaid-init.js"></script>
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
    </body>
</html>
